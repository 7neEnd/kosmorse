<!DOCTYPE html><html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>코스모스-KOSMORSE</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background: #f0f0f0;
      padding: 20px;
    }
    h1 {
      font-size: 7vw;
      margin-bottom: 10px;
      color: #007acc;
    }
    button {
      font-size: 5vw;
      margin: 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background-color: #007acc;
      color: white;
    }
    #morse-button {
      width: 80vw;
      height: 15vh;
      font-size: 6vw;
      margin-top: 10px;
    }
    #output {
      font-size: 6vw;
      color: #111;
      margin: 20px 0 10px;
      text-align: center;
    }
    #full-text {
      font-size: 5.5vw;
      color: #555;
      margin-bottom: 10px;
      text-align: center;
    }
    .morse-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      max-width: 95vw;
      margin-bottom: 10px;
    }
    .morse-item {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 4vw;
      cursor: pointer;
      user-select: none;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
      justify-content: center;
    }
    .favorites {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .toggle-group {
      margin-bottom: 15px;
      font-size: 4vw;
    }
  </style>
</head>
<body>
  <h1>코스모스 - KOSMORSE</h1>  <div class="toggle-group">
    <label><input type="checkbox" id="autoSpeak" checked> 입력 시 자동 읽기</label>
  </div>  <div class="morse-grid" id="morseGrid"></div>  <div id="output">출력: </div>
  <div id="full-text">전체 문장: </div>  <div class="controls">
    <button id="undo-button">지우기</button>
    <button id="speak-button">읽어주기</button>
    <button id="clear-button">전체 지우기</button>
  </div>  <div class="favorites">
    <button class="fav" data-msg="도와주세요">도와주세요</button>
    <button class="fav" data-msg="화장실">화장실</button>
    <button class="fav" data-msg="배고파요">배고파요</button>
    <button class="fav" data-msg="괜찮아요">괜찮아요</button>
    <button class="fav" data-msg="감사합니다">감사합니다</button>
  </div><button id="morse-button">여기를 눌러 입력</button>

  <script>
    const morseToHangul = {
      '.-..': 'ㄱ',
      '.-..-': 'ㄴ',
      '-....': 'ㄷ',
      '...-.': 'ㄹ',
      '--..': 'ㅁ',
      '.--..': 'ㅂ',
      '--.-.': 'ㅅ',
      '.---': 'ㅇ',
      '-.-.-': 'ㅈ',
      '--.-.': 'ㅊ',
      '---.': 'ㅋ',
      '-.--.': 'ㅌ',
      '.-.-.': 'ㅍ',
      '-.-.-.': 'ㅎ',
      '-': 'ㅏ',
      '..': 'ㅑ',
      '--': 'ㅓ',
      '---': 'ㅕ',
      '...': 'ㅗ',
      '....': 'ㅛ',
      '.-': 'ㅜ',
      '.-.': 'ㅠ',
      '..-': 'ㅡ',
      '.-..': 'ㅣ'
    };

    const morseData = [
      ['ㄱ', '·−··'], ['ㄴ', '··−·'], ['ㄷ', '−···'], ['ㄹ', '···−'], ['ㅁ', '−−'],
      ['ㅂ', '·−−'], ['ㅅ', '−−·'], ['ㅇ', '-·-'], ['ㅈ', '·--·'], ['ㅊ', '−·−·−'],
      ['ㅋ', '−··-'], ['ㅌ', '−−··'], ['ㅍ', '---'], ['ㅎ', '·---'],
      ['ㅏ', '·'], ['ㅑ', '··'], ['ㅓ', '−'], ['ㅕ', '···'], ['ㅗ', '·-'],
      ['ㅛ', '-·'], ['ㅜ', '····'], ['ㅠ', '·−·'], ['ㅡ', '−··'], ['ㅣ', '··-'],['ㅐ', '--·-'],['ㅔ', '-.--']
    ];

    const morseGrid = document.getElementById('morseGrid');
    morseData.forEach(([char, code]) => {
      const btn = document.createElement('div');
      btn.className = 'morse-item';
      btn.dataset.char = char;
      btn.innerText = `${char} (${code})`;
      btn.addEventListener('click', () => handleCharInput(char));
      morseGrid.appendChild(btn);
    });

    const output = document.getElementById("output");
    const fullText = document.getElementById("full-text");
    const button = document.getElementById("morse-button");
    const undoButton = document.getElementById("undo-button");
    const speakButton = document.getElementById("speak-button");
    const clearButton = document.getElementById("clear-button");
    const autoSpeak = document.getElementById("autoSpeak");
    const favButtons = document.querySelectorAll(".fav");

    let signal = "";
    let sentence = "";
    let pressStart = 0;

    function updateText() {
      fullText.textContent = "전체 문장: " + sentence;
    }

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'ko-KR';
      window.speechSynthesis.speak(utter);
    }

    function handleCharInput(char) {
      sentence += char;
      updateText();
      if (autoSpeak.checked) speak(char);
    }

    function registerPress(duration) {
      if (duration < 300) {
        signal += ".";
      } else {
        signal += "-";
      }
      output.textContent = "입력 중: " + signal;

      clearTimeout(window._morseTimeout);
      window._morseTimeout = setTimeout(() => {
        const result = morseToHangul[signal] || "?";
        output.textContent = "출력: " + result;
        if (result !== "?") {
          handleCharInput(result);
        }
        signal = "";
      }, 1000);
    }

    function startPress() { pressStart = Date.now(); }
    function endPress() {
      const duration = Date.now() - pressStart;
      registerPress(duration);
    }

    button.addEventListener("mousedown", startPress);
    button.addEventListener("mouseup", endPress);
    button.addEventListener("touchstart", startPress);
    button.addEventListener("touchend", endPress);

    undoButton.addEventListener("click", () => {
      sentence = sentence.slice(0, -1);
      updateText();
    });

    clearButton.addEventListener("click", () => {
      sentence = "";
      updateText();
    });

    speakButton.addEventListener("click", () => {
      speak(sentence);
    });

    favButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        sentence += btn.dataset.msg + " ";
        updateText();
        if (autoSpeak.checked) speak(btn.dataset.msg);
      });
    });
  </script></body>
</html>